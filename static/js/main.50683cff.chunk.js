(this["webpackJsonpreact-piano"]=this["webpackJsonpreact-piano"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),o=n(9),u=n.n(o),i=(n(19),n(20),function(){var e=(new Date).getFullYear();return Object(r.jsxs)("footer",{className:"footer",children:[Object(r.jsx)("a",{href:"https://github.com/treb0ry/react-piano",children:"GitHub"}),Object(r.jsx)("br",{}),e]})}),s=(n(21),function(){return Object(r.jsxs)("h1",{className:"logo",children:[Object(r.jsx)("span",{role:"img","aria-label":"metal hand emoji",children:"\ud83e\udd18"}),Object(r.jsx)("span",{role:"img","aria-label":"musical keyboard emoji",children:"\ud83c\udfb9"}),Object(r.jsx)("span",{role:"img","aria-label":"musical notes emoji",children:"\ud83c\udfb6"})]})}),l=function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"Sorry,it's not gonna work \ud83d\ude2d"}),Object(r.jsxs)("p",{children:["Seems like your browser doesn't support ",Object(r.jsx)("code",{children:"Audio API"}),"."]})]})};function j(){return Object(a.useRef)(window.AudioContext||window.webkitAudioContext||null).current}var b=n(3),p="acoustic_grand_piano",d=Object(a.createContext)({instrument:p,setInstrument:function(){}}),f=(d.Consumer,function(){return Object(a.useContext)(d)}),O=function(e){var t=e.children,n=Object(a.useState)(p),c=Object(b.a)(n,2),o=c[0],u=c[1];return Object(r.jsx)(d.Provider,{value:{instrument:o,setInstrument:u},children:t})},h=n(10);var x=h.map((function(e){return{value:e,label:e.replace(/_/gi," ")}})),v=(n(22),function(){var e=f(),t=e.instrument,n=e.setInstrument;return Object(r.jsx)("select",{className:"instruments",onChange:function(e){var t=e.target;return n(t.value)},value:t,children:x.map((function(e){var t=e.label,n=e.value;return Object(r.jsx)("option",{value:n,children:t},n)}))})}),m=n(5),y=n(4),g=n(2),w=n.n(g),k=n(6),C=n(11),S=n.n(C);var A=Array.from("q2w3er5t6y7u"),N=Array.from("zsxdcvgbhnjm");var D=[0,2,4,5,7,9,11],F={0:"C",1:"C",2:"D",3:"D",4:"E",5:"F",6:"F",7:"G",8:"G",9:"A",10:"A",11:"B"};function P(e){var t=e-24,n=t%12;return{octave:Math.floor(t/12)+1,pitch:F[n],index:n,type:!D.includes(n)?"sharp":"natural",midi:e}}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fromNote,n=void 0===t?60:t,r=e.toNote,a=void 0===r?83:r;return Array(a-n+1).fill(0).map((function(e,t){return P(n+t)}))}(),I=n(13),L=n(12);function M(e,t){return(n=t,n.replace(/Key|Digit/gi,"")).toUpperCase()===e.toUpperCase();var n}n(38);var U=function(e){var t=["#7eb8da","#92ddea","#ffa5d8","#be9ddf","#9579d1"],n=t[Math.floor(Math.random()*t.length)],c={backgroundColor:"".concat(n),boxShadow:"0px 0px 20px 2px ".concat(n)},o=e.type,u=e.label,i=e.onDown,s=e.onUp,l=Object(I.a)(e,["type","label","onDown","onUp"]),j=function(e){var t=e.watchKey,n=e.onStartPress,r=e.onFinishPress,c=Object(a.useState)(!1),o=Object(b.a)(c,2),u=o[0],i=o[1];return Object(a.useEffect)((function(){function e(e){var r=e.code;!u&&M(t,r)&&(i(!0),n())}function a(e){var n=e.code;u&&M(t,n)&&(i(!1),r())}return document.addEventListener("keydown",e),document.addEventListener("keyup",a),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",a)}}),[t,u,i,n,r]),u}({watchKey:u,onStartPress:i,onFinishPress:s});return Object(r.jsx)("button",Object(y.a)(Object(y.a)({className:Object(L.a)("key key--".concat(o),j&&"is-pressed"),style:"natural"===o&&j?c:{},type:"button",onMouseDown:i,onMouseUp:s},l),{},{children:u}))},B=(n(8),function(e){var t=e.loading,n=e.play,a=e.stop;return Object(r.jsx)("div",{className:"keyboard",children:E.map((function(e){var c=e.midi,o=e.type,u=e.index,i=function(e,t){return(e<5?A:N)[t]}(e.octave,u);return Object(r.jsx)(U,{type:o,label:i,disabled:t,onDown:function(){return n(c)},onUp:function(){return a(c)}},c)}))})}),G=function(){var e=j(),t=f().instrument,n=function(e){var t=e.AudioContext,n={},r=Object(a.useState)(null),c=Object(b.a)(r,2),o=c[0],u=c[1],i=Object(a.useState)(!1),s=Object(b.a)(i,2),l=s[0],j=s[1],d=Object(a.useState)(null),f=Object(b.a)(d,2),O=f[0],h=f[1],x=Object(a.useRef)(new t);function v(){return(v=Object(k.a)(w.a.mark((function e(){var t,n,r=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:p,j(!0),e.next=4,S.a.instrument(x.current,t);case 4:n=e.sent,u(t),h(n),j(!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return C.apply(this,arguments)}function C(){return(C=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suspended"!==x.current.state){e.next=6;break}return e.next=3,x.current.resume();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=Promise.resolve();case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(k.a)(w.a.mark((function e(t){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(O){e.next=4;break}return e.abrupt("return");case 4:r=O.play(t.toString()),n=Object(y.a)(Object(y.a)({},n),{},Object(m.a)({},t,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:if(n[t]){e.next=4;break}return e.abrupt("return");case 4:n[t].stop(),n=Object(y.a)(Object(y.a)({},n),{},Object(m.a)({},t,null));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return{loading:l,current:o,play:function(e){return A.apply(this,arguments)},stop:function(e){return N.apply(this,arguments)},load:function(){return v.apply(this,arguments)}}}({AudioContext:e}),c=n.loading,o=n.play,u=n.stop,i=n.load,s=n.current;return Object(a.useEffect)((function(){c||t===s||i(t)}),[i,c,s,t]),Object(r.jsx)(B,{loading:c,play:o,stop:u})},K=function(){return Object(r.jsx)(O,{children:Object(r.jsxs)("div",{className:"playground",children:[Object(r.jsx)(G,{}),Object(r.jsx)(v,{})]})})},_=function(){return j()?Object(r.jsx)(K,{}):Object(r.jsx)(l,{})};n(39);var J=function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(s,{}),Object(r.jsx)("main",{className:"app-content",children:Object(r.jsx)(_,{})}),Object(r.jsx)(i,{})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(J,{})}),document.getElementById("root")),R()},8:function(e,t,n){}},[[40,1,2]]]);
//# sourceMappingURL=main.50683cff.chunk.js.map